#!/usr/bin/env bash
set -euo pipefail

echo "==> Running tests (unit/integration)..."
bin/rails test

echo
echo "==> Running system tests..."
bin/rails test test/system

echo
echo "==> Running Brakeman..."
# --no-pager ensures it prints to stdout instead of opening a scrolling view
# --ensure-latest checks for newer Brakeman versions (optional but good)
bin/brakeman --no-pager

echo
echo "==> Running RuboCop..."
bin/rubocop

echo
echo "==> Running bundle-audit..."
bundle exec bundle-audit check --update

echo
echo "âœ… All checks passed."
