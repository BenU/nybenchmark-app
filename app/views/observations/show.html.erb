<% content_for :title, "Observation Details" %>

<main class="container">

  <div class="grid">
    <hgroup>
      <h1>Observation Details</h1>
      <p><%= @observation.entity.name %> â€¢ FY <%= @observation.fiscal_year %></p>
    </hgroup>
    <div style="text-align: right; align-self: center;">
      <%= link_to "Edit", edit_observation_path(@observation), role: "button", class: "outline" %>
      <%= link_to "Back", observations_path, role: "button", class: "secondary outline" %>
    </div>
  </div>

  <article>
    <div class="grid">
      <div>
        <strong>Metric</strong>
        <p><%= @observation.metric.label %> (<%= @observation.metric.key %>)</p>
      </div>
      <div>
        <strong>Value</strong>
        <p>
          <% if @observation.value_numeric.present? %>
            <%= number_with_delimiter(@observation.value_numeric) %>
          <% else %>
            <%= @observation.value_text %>
          <% end %>
        </p>
      </div>
    </div>

    <div class="grid">
      <div>
        <strong>Document</strong>
        <p><%= link_to @observation.document.title, @observation.document %></p>
      </div>
      <div>
        <strong>Page Reference</strong>
        <p><%= @observation.page_reference %></p>
      </div>
    </div>

    <% if @observation.notes.present? %>
      <hr>
      <strong>Notes</strong>
      <p><%= @observation.notes %></p>
    <% end %>

    <footer>
      <small>Updated at: <%= @observation.updated_at.to_fs(:long) %></small>
      <div style="margin-top: 1rem;">
        <%= button_to "Destroy Observation", @observation, method: :delete, class: "contrast outline", form: { style: "display:inline-block;" }, data: { turbo_confirm: "Are you sure?" } %>
      </div>
    </footer>
  </article>
</main>